% CVPR Lab poster Beamer theme
%
% CHANGES
% - Initial template: Fedor Zolotarev (and other unknown authors?)
% - Rework for new LUT guidelines (11/2021): Felix Hild√©n
% - Your awesome modifications?
%
% This template adjusts the main colors and layout of Beamer frames with the intent
% of producing a single-page poster. The page is a single FRAME with two main columns
% for content. Each section is a BLOCK that is internally wrapped with a minipage.
% The theme requires little setup in the main tex file, but a specific arrangement of
% five columns must be used for margin calculations to work and align everything nicely.
% A shorthand environment and a separator command are provided to make this easier.
%
% The theme is entirely modifiable. Basic customisations are provided in the CUSTOMISE
% section below. Colors and spacing rules can quite easily be tweaked too.
% Different LUT logos can also be used: choices are available in LUT press kits
% or bundled with this theme.
%
% Changing scale: if you like to read small print, changing the scale is a good way to
%                 fit some more content. 1.4 is a good starting point but suit yourself.
% A1 posters: margins are relatively larger on smaller papers, so adjust to taste.
%
% A minimal example of using the theme:
%
% \documentclass[final,hyperref={pdfpagelabels=false}]{beamer}
% \usepackage[orientation=portrait,size=a0,scale=1.4,debug]{beamerposter}
% \mode<presentation>{\usetheme{cvprl}}
% \usepackage[english]{babel}
% \usepackage[latin1]{inputenc}
%
% \title{Title}
% \subtitle{Subtitle}
% \author{Me\textsuperscript{1}}
% \institute{\textsuperscript{1}My contact information}
%
% \begin{document}
% \begin{frame}
% \begin{cvprlposter}
%     \begin{block}{First}First block.\end{block}
% \cvprlpostermiddle
%     \begin{block}{Second}Second block.\end{block}
%     \begin{block}{Third}Third block.\end{block}
% \end{cvprlposter}
% \end{frame}
% \end{document}

% ------------------------------------ META ------------------------------------
\ProvidesPackage{cvprl}
\mode<all>
\usepackage{graphicx} % for logo trim

% ------------------------------------ CUSTOMISE ------------------------------------
\setbeamertemplate{itemize items}{\color{black}{$\bullet$}}
\setbeamertemplate{enumerate items}[default]
\setbeamertemplate{caption}[numbered]

\newlength{\cvprlmargin}
\setlength{\cvprlmargin}{15em}

\newlength{\cvprlcolsep}
\setlength{\cvprlcolsep}{5em}

% Display a grid to help align images
%\beamertemplategridbackground[1cm]

% ------------------------------------ SHORT-HANDS ------------------------------------
\newenvironment{cvprlposter}{
    \begin{columns}[T]
    \begin{column}{\cvprlmargin}\end{column}
    \begin{column}{\cvprlcolumn}
}{
    \end{column}
    \begin{column}{\cvprlmargin}\end{column}
    \end{columns}
}
\newcommand{\cvprlpostermiddle}{
    \end{column}
    \begin{column}{\cvprlcolsep}\end{column}
    \begin{column}{\cvprlcolumn}
}

% ------------------------------------ APPEARANCE ------------------------------------
\selectcolormodel{cmyk}

% calculate other lengths
\newlength{\cvprlcontent}
\setlength{\cvprlcontent}{\paperwidth}
\addtolength\cvprlcontent{-\cvprlmargin}
\addtolength\cvprlcontent{-\cvprlmargin}

\newlength{\cvprlcolumn}
\setlength{\cvprlcolumn}{0.5\cvprlcontent}
\addtolength\cvprlcolumn{-0.5\cvprlcolsep}

% equal font sizes for all levels
\setbeamerfont{itemize/enumerate body}{size=\normalsize}
\setbeamerfont{itemize/enumerate subbody}{size=\normalsize}
\setbeamerfont{itemize/enumerate subsubbody}{size=\normalsize}

% color definitions
\definecolor{lutpink}{rgb}{0.929,0.090,0.302}
\definecolor{lutorange}{rgb}{1,0.40,0}
\definecolor{lutgreen}{rgb}{0.251,0.835,0.125}

\setbeamercolor{logohead}{fg=black,bg=black}
\setbeamercolor{headline}{fg=black}
\setbeamercolor{footline}{fg=black}
\setbeamercolor{footlinesep}{fg=black,bg=lutorange}

\setbeamercolor{title}{fg=lutorange}
\setbeamercolor{subtitle}{fg=black}
\setbeamercolor{authorintro}{fg=lutorange}
\setbeamercolor{author}{fg=black}
\setbeamercolor{institute}{fg=black}
\setbeamercolor{framesubtitle}{fg=lutpink}

\setbeamercolor*{normal text}{fg=black}
\setbeamercolor*{block body}{fg=black}
\setbeamercolor*{block title}{fg=lutpink}

\setbeamercolor*{example body}{fg=black}
\setbeamercolor*{example text}{fg=black}
\setbeamercolor*{example title}{fg=lutpink}

% Figure prefixes, itemize and enum item prefixes
\setbeamercolor{structure}{fg=black}

% ------------------------------------ ENVIRONMENTS ------------------------------------
\setbeamertemplate{headline}{  
    \leavevmode
    \begin{beamercolorbox}[wd=\textwidth]{logohead}
        \vskip 2em
        \hspace{\cvprlmargin}
        \includegraphics[trim={0.8cm 0 0 0},clip,width=30em]{res/LUT-logo.pdf}
        \vskip 2em
    \end{beamercolorbox}

    \begin{beamercolorbox}[wd=\paperwidth]{headline}
    \begin{columns}[T]
    \begin{column}{\cvprlmargin}\end{column}
    \begin{column}{\cvprlcontent}
        \vskip 5em
        \usebeamercolor{title}{\color{fg}\Huge\textbf{\inserttitle}\par}
        \usebeamercolor{subtitle}{\color{fg}\huge\textbf{\insertsubtitle}\par}
        \vskip 1em
        \usebeamercolor{authorintro}{\color{fg}\Large Project group members:\par}
        \usebeamercolor{author}{\color{fg}\large\insertauthor\par}
    \end{column}
    \begin{column}{\cvprlmargin}\end{column}
    \end{columns}
    \end{beamercolorbox}
    \vskip 0em
}

\setbeamertemplate{footline}{  
    \leavevmode
    \begin{beamercolorbox}[wd=\paperwidth]{headline}
    \vskip 1em
    \begin{columns}[T]
    \begin{column}{\cvprlmargin}\end{column}
    \begin{column}{\cvprlcontent}
        \begin{beamercolorbox}[wd=\textwidth]{footlinesep}\vspace{1em}\end{beamercolorbox}
        \vskip 1em
        \centering
        \begin{minipage}{0.95\textwidth}
            \usebeamercolor{institute}{\color{fg}\large\insertinstitute\par}
        \end{minipage}
    \end{column}
    \begin{column}{\cvprlmargin}\end{column}
    \end{columns}
    \vskip 1em
    \end{beamercolorbox}
}

\setbeamertemplate{block begin}{
    \begin{beamercolorbox}{block title}
        \usebeamerfont*{block title}{\insertblocktitle}
    \end{beamercolorbox}
    \begin{beamercolorbox}{block body}
        % extra space is carried over from somewhere so we go to the next \par
        % which also fixes issues with separation from the block title,
        % otherwise we'd have to use spacing arguments to beamercolorbox
        \usebeamerfont{block body}\par
}
\setbeamertemplate{block end}{
    \end{beamercolorbox}
    \vskip 0.5em
}
